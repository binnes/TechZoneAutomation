<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Exploration of TechZone Accelerator Toolkit"><meta name=author content="Brian Innes"><link href=https://binnes.github.io/TechZoneAutomation/bom/ rel=canonical><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.1"><title>Bill of Materials - TechZone Accelerator Toolkit</title><link rel=stylesheet href=../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#bill-of-materials class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="TechZone Accelerator Toolkit" class="md-header__button md-logo" aria-label="TechZone Accelerator Toolkit" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TechZone Accelerator Toolkit </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Bill of Materials </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/binnes/TechZoneAutomation title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> TechZoneAutomation </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="TechZone Accelerator Toolkit" class="md-nav__button md-logo" aria-label="TechZone Accelerator Toolkit" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> TechZone Accelerator Toolkit </label> <div class=md-nav__source> <a href=https://github.com/binnes/TechZoneAutomation title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> TechZoneAutomation </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../plan/ class=md-nav__link> Plan </a> </li> <li class=md-nav__item> <a href=../setup/ class=md-nav__link> Setup </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Bill of Materials <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Bill of Materials </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#dependencies class=md-nav__link> Dependencies </a> <nav class=md-nav aria-label=Dependencies> <ul class=md-nav__list> <li class=md-nav__item> <a href=#alias class=md-nav__link> Alias </a> </li> <li class=md-nav__item> <a href=#optional class=md-nav__link> Optional </a> </li> <li class=md-nav__item> <a href=#outstanding-questions class=md-nav__link> Outstanding Questions </a> </li> <li class=md-nav__item> <a href=#verifying-all-dependencies-are-resolved class=md-nav__link> Verifying all dependencies are resolved </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../deploy/ class=md-nav__link> Deploy </a> </li> <li class=md-nav__item> <a href=../reference/ class=md-nav__link> Reference </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#dependencies class=md-nav__link> Dependencies </a> <nav class=md-nav aria-label=Dependencies> <ul class=md-nav__list> <li class=md-nav__item> <a href=#alias class=md-nav__link> Alias </a> </li> <li class=md-nav__item> <a href=#optional class=md-nav__link> Optional </a> </li> <li class=md-nav__item> <a href=#outstanding-questions class=md-nav__link> Outstanding Questions </a> </li> <li class=md-nav__item> <a href=#verifying-all-dependencies-are-resolved class=md-nav__link> Verifying all dependencies are resolved </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/binnes/TechZoneAutomation/edit/main/docs/bom.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1 id=bill-of-materials>Bill of Materials<a class=headerlink href=#bill-of-materials title="Permanent link">&para;</a></h1> <p>To deploy infrastructure or software using TechZone Accelerator you need to start by creating a <strong>Bill of Materials</strong> (BOM) or using a predefined BOM. The <a href=https://builder.cloudnativetoolkit.dev target=:blank>TechZone Accelerator Toolkit</a> site is the starting place to see the modules catalog and list of pre-defined solutions.</p> <p>The BOM defines the modules you want to install. Available modules can be found in the <a href=https://modules.cloudnativetoolkit.dev target=:blank>Module Catalog</a></p> <p>See the <a href=https://operate.cloudnativetoolkit.dev/apply/bill-of-material-reference/ target=:blamk>operate documentation</a> for additional details of the BOM content</p> <div class="admonition todo"> <p class=admonition-title>Todo</p> <p>Why are some modules not in the catalog (e.g. <a href=https://github.com/cloud-native-toolkit/terraform-k8s-ocp-cluster>k8s-ocp-cluster</a> - does this mean they are obsolete or incomplete?</p> </div> <h2 id=dependencies>Dependencies<a class=headerlink href=#dependencies title="Permanent link">&para;</a></h2> <p>When you want to install a module there maybe some dependencies that module needs to allow it to be installed. For example, if you want to use GitOps (ArgoCD) to install an application then GitOps needs to be available and configured on the target cluster. Similarly if you want to install and configure GitOps then I need to have a cluster to install GitOps into.</p> <p>Every module in then TechZone Accelerator Toolkit defines it's dependencies in a module.yaml file in the module's github repository. The module's repo is linked by clicking on the module name in the <a href=https://modules.cloudnativetoolkit.dev target=:blank>modules catalog</a></p> <h3 id=alias>Alias<a class=headerlink href=#alias title="Permanent link">&para;</a></h3> <p>Sometimes a module dependency can be satisfied by multiple modules. In this case an alias can be used, where a module can register that it satisfies an alias. An example of this is the alias <strong>cluster</strong>. Any module that makes a Kubernetes cluster available to other modules will define the <strong>cluster</strong> alias. This then provides a generic way to specify a cluster dependency. So long as a module is included in a BOM that satisfies the cluster alias the dependency will be met.</p> <p>If you explore the <strong>cluster</strong> category in the <a href=https://modules.cloudnativetoolkit.dev target=:blank>modules catalog</a> you will see a number of options for installing a Kubernetes cluster, including an option to simple provide the login to an existing cluster - all these modules will satisfy the <strong>cluster</strong> dependency.</p> <h3 id=optional>Optional<a class=headerlink href=#optional title="Permanent link">&para;</a></h3> <p>Some dependencies can be specified as optional. This is where a module may be able to complete the installation without the optional dependency being satisfied in the BOM. An example of this is that modules using GitOps to perform an installation will specify the cluster as optional. This is because the module doesn't need to interact with the cluster to complete the installation. The module can simple create content in a GitOps repository to complete the installation on a cluster.</p> <h3 id=outstanding-questions>Outstanding Questions<a class=headerlink href=#outstanding-questions title="Permanent link">&para;</a></h3> <div class="admonition todo"> <p class=admonition-title>Todo</p> <ul> <li>In the module.yaml what are the <strong>refs</strong> and <strong>interface</strong> properties used for?<ul> <li>What does it mean when a dependency has multiple refs (e.g. <a href=https://github.com/cloud-native-toolkit/terraform-tools-artifactory/blob/main/module.yaml>artifactory</a>)?</li> </ul> </li> <li>How does the <strong>platform</strong> property work - any implications/restrictions or is this a testing statement or is there logic in the toolkit tool which checks all modules support the deployed platform?</li> </ul> <p>How are dependencies resolved? </p> <ul> <li>if a single module satisfies a dependency is it automatically selected? </li> <li>can a default module be specified if there are multiple modules that satisfy a dependency and one is not included in a BOM?</li> <li>is there a feature to allow an OR with dependencies (e.g. I need to have a MySQL or Postgres DB)?</li> </ul> </div> <h3 id=verifying-all-dependencies-are-resolved>Verifying all dependencies are resolved<a class=headerlink href=#verifying-all-dependencies-are-resolved title="Permanent link">&para;</a></h3> <p>Once a BOM has been completed you can validate that all dependencies have been satisfied or can be resolved by running the <strong>iascable</strong> tool. This will be covered in more detail in the <a href=../deploy/ >deploy</a> section.</p> <div class=highlight><pre><span></span><code>    iascable build -i my_bom.yaml
</code></pre></div> <p><em>where </em><em>my_bom.yaml</em><em> is the file containing the BOM you want to verify</em></p> <p>The iascable build command will create a folder called output, if it doesn't already exist, then generate a folder within the output folder named using the <strong>name</strong> property in the metadata section of the BOM. </p> <p>Within this folder will be a file called <strong>bom.yaml</strong> which will be an expanded version of the original BOM (my_bom.yaml), pulling in all dependencies. If a dependency cannot be automatically resolved you will get an error detailing which dependencies cannot be resolved.</p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../setup/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Setup" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Setup </div> </div> </a> <a href=../deploy/ class="md-footer__link md-footer__link--next" aria-label="Next: Deploy" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Deploy </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["content.code.annotate", "navigation.instant", "naviagation.sections", "navigation.tracking", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../assets/javascripts/bundle.9c69f0bc.min.js></script> </body> </html>